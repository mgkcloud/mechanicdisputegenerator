(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3343:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>W});var a=t(5155),r=t(2115),n=t(5695),i=t(4641),l=t(7434),c=t(9869),o=t(646),d=t(1586),m=t(1788),u=t(7168),h=t(2138),x=t(5525),p=t(8564);function f(e){let{claimStarted:s,startClaim:t,handleStartOver:r,currentStep:n,steps:i}=e;return(0,a.jsx)("section",{className:"bg-gradient-hero transition-all duration-300 ".concat(s?"py-6":"py-16 md:py-24"),children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"mx-auto max-w-3xl text-center",children:[(0,a.jsx)("h1",{className:"mb-6 font-bold tracking-tight text-gray-900 transition-all duration-300 ".concat(s?"text-2xl md:text-3xl":"text-4xl md:text-5xl lg:text-6xl"),children:s?"Complete Your Mechanic Dispute Claim":(0,a.jsxs)(a.Fragment,{children:["Resolve Your Mechanic Dispute ",(0,a.jsx)("span",{className:"text-primary",children:"Professionally"})]})}),!s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"mb-8 text-lg text-muted-foreground md:text-xl",children:"Generate legally-sound documents to resolve disputes with mechanics in Australia. No legal expertise required."}),(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 sm:flex-row",children:[(0,a.jsxs)(u.$,{size:"lg",variant:"primary",onClick:t,children:["Start Your Claim Now",(0,a.jsx)(h.A,{className:"ml-2 h-4 w-4"})]}),(0,a.jsx)(u.$,{size:"lg",variant:"outline",children:"Learn How It Works"})]}),(0,a.jsxs)("div",{className:"mt-12 flex flex-wrap items-center justify-center gap-x-8 gap-y-4 text-sm text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.A,{className:"mr-2 h-5 w-5 text-primary"}),(0,a.jsx)("span",{children:"Secure & Confidential"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.A,{className:"mr-2 h-5 w-5 text-primary"}),(0,a.jsx)("span",{children:"4.9/5 Customer Rating"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.A,{className:"mr-2 h-5 w-5 text-primary"}),(0,a.jsx)("span",{children:"10,000+ Documents Generated"})]})]})]}),s&&(0,a.jsxs)("div",{className:"flex items-center justify-center",children:[(0,a.jsx)(u.$,{size:"sm",variant:"ghost",onClick:r,className:"mr-4",children:"Start Over"}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Step ",n," of ",i.length,":"," ",(0,a.jsx)("span",{className:"font-medium",children:i[n-1].title})]})]})]})})})}function g(e){let{steps:s,currentStep:t,goToStep:r}=e;return(0,a.jsx)("div",{className:"mb-8 overflow-hidden rounded-xl border border-border/60 bg-card shadow-sm",children:(0,a.jsx)("div",{className:"flex",children:s.map(e=>(0,a.jsxs)("div",{className:"flex flex-1 cursor-pointer items-center justify-center border-b-2 p-4 text-sm font-medium transition-all duration-200 ".concat(t===e.id?"border-primary text-primary":t>e.id?"border-success text-success":"border-transparent text-muted-foreground"),onClick:()=>e.id<=t&&r(e.id),children:[(0,a.jsx)("div",{className:"mr-2 flex h-8 w-8 items-center justify-center rounded-full ".concat(t===e.id?"bg-primary text-white":t>e.id?"bg-success text-white":"bg-muted text-muted-foreground"),children:t>e.id?(0,a.jsx)(o.A,{className:"h-5 w-5"}):(0,a.jsx)(e.icon,{className:"h-5 w-5"})}),(0,a.jsx)("span",{className:"hidden md:inline",children:e.title})]},e.id))})})}var j=t(7720),v=t(3052);t(9509);let N={letter_of_demand:"Letter of Demand to Mechanic",consumer_complaint:"Consumer Affairs Victoria Complaint",vcat_application:"VCAT Application Form",insurance_claim:"Insurance Claim Support Letter"};function b(e){let{formData:s,formTouched:t,errors:r,handleInputChange:n,handleInsuranceChange:i,handleNext:l}=e;return(0,a.jsxs)("div",{id:"step1Content",children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Enter Your Dispute Details"}),(0,a.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Provide accurate information to generate the most effective document for your case."})]}),(0,a.jsxs)("form",{id:"disputeForm",onSubmit:e=>e.preventDefault(),className:"mx-auto max-w-4xl",children:[(0,a.jsxs)("div",{className:"mb-8 rounded-xl border border-border/60 bg-card p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Select Document Type"}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"documentType",className:"form-label",children:"What type of document do you need?"}),(0,a.jsxs)("select",{id:"documentType",name:"document_type",required:!0,className:"form-select ".concat(t.document_type&&r.document_type?"border-destructive ring-destructive":""),value:s.document_type||"",onChange:n,children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"-- Select an option --"}),Object.entries(N).map(e=>{let[s,t]=e;return(0,a.jsx)("option",{value:s,children:t},s)})]}),t.document_type&&r.document_type&&(0,a.jsxs)("p",{className:"error-message mt-1 text-sm text-destructive flex items-center",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-1"}),r.document_type]}),(0,a.jsx)("p",{className:"form-helper",children:"Choose the document that best fits your situation and desired outcome."})]})]}),(0,a.jsxs)("div",{className:"mb-8 rounded-xl border border-border/60 bg-card p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Your Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"customerName",className:"form-label",children:"Your Full Name"}),(0,a.jsx)("input",{type:"text",id:"customerName",name:"customer_name",required:!0,className:"form-input ".concat(t.customer_name&&r.customer_name?"border-destructive ring-destructive":""),onChange:n,value:s.customer_name||""}),t.customer_name&&r.customer_name&&(0,a.jsxs)("p",{className:"error-message mt-1 text-sm text-destructive flex items-center",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-1"}),r.customer_name]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"customerEmail",className:"form-label",children:"Email Address"}),(0,a.jsx)("input",{type:"email",id:"customerEmail",name:"customer_email",required:!0,className:"form-input ".concat(t.customer_email&&r.customer_email?"border-destructive ring-destructive":""),placeholder:"you@example.com",onChange:n,value:s.customer_email||""}),t.customer_email&&r.customer_email&&(0,a.jsxs)("p",{className:"error-message mt-1 text-sm text-destructive flex items-center",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-1"}),r.customer_email]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsxs)("label",{htmlFor:"customerPhone",className:"form-label",children:["Phone Number ",(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"(Optional)"})]}),(0,a.jsx)("input",{type:"tel",id:"customerPhone",name:"customer_phone",className:"form-input ".concat(t.customer_phone&&r.customer_phone?"border-destructive ring-destructive":""),placeholder:"0400 123 456",onChange:n,value:s.customer_phone||""}),t.customer_phone&&r.customer_phone&&(0,a.jsxs)("p",{className:"error-message mt-1 text-sm text-destructive flex items-center",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-1"}),r.customer_phone]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsxs)("label",{htmlFor:"customerAddress",className:"form-label",children:["Your Address ",(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"(Optional)"})]}),(0,a.jsx)("input",{type:"text",id:"customerAddress",name:"customer_address",className:"form-input",placeholder:"123 Example St, Sydney NSW 2000",onChange:n,value:s.customer_address||""})]})]})]}),(0,a.jsxs)("div",{className:"mb-8 rounded-xl border border-border/60 bg-card p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Mechanic Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"mechanicName",className:"form-label",children:"Mechanic Business Name"}),(0,a.jsx)("input",{type:"text",id:"mechanicName",name:"mechanic_name",required:!0,className:"form-input ".concat(t.mechanic_name&&r.mechanic_name?"border-destructive ring-destructive":""),onChange:n,value:s.mechanic_name||""}),t.mechanic_name&&r.mechanic_name&&(0,a.jsxs)("p",{className:"error-message mt-1 text-sm text-destructive flex items-center",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-1"}),r.mechanic_name]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsxs)("label",{htmlFor:"mechanicABN",className:"form-label",children:["ABN ",(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"(Optional)"})]}),(0,a.jsx)("input",{type:"text",id:"mechanicABN",name:"mechanic_abn",className:"form-input",placeholder:"12 345 678 901",onChange:n,value:s.mechanic_abn||""})]}),(0,a.jsxs)("div",{className:"form-group md:col-span-2",children:[(0,a.jsxs)("label",{htmlFor:"mechanicAddress",className:"form-label",children:["Mechanic Address ",(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"(Optional)"})]}),(0,a.jsx)("input",{type:"text",id:"mechanicAddress",name:"mechanic_address",className:"form-input",placeholder:"456 Workshop St, Melbourne VIC 3000",onChange:n,value:s.mechanic_address||""})]})]})]}),(0,a.jsxs)("div",{className:"mb-8 rounded-xl border border-border/60 bg-card p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Vehicle and Damage Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"vehicleDetails",className:"form-label",children:"Vehicle Details"}),(0,a.jsx)("input",{type:"text",id:"vehicleDetails",name:"vehicle_details",className:"form-input",placeholder:"2018 Toyota Corolla, Rego: ABC123",onChange:n,value:s.vehicle_details||""})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{htmlFor:"serviceDate",className:"form-label",children:"Service Date"}),(0,a.jsx)("input",{type:"date",id:"serviceDate",name:"service_date",className:"form-input",onChange:n,value:s.service_date||""})]}),(0,a.jsxs)("div",{className:"form-group md:col-span-2",children:[(0,a.jsx)("label",{htmlFor:"damageDescription",className:"form-label",children:"Damage Description"}),(0,a.jsx)("textarea",{id:"damageDescription",name:"damage_description",required:!0,className:"form-textarea ".concat(t.damage_description&&r.damage_description?"border-destructive ring-destructive":""),placeholder:"Describe the damage to your vehicle in detail...",onChange:n,value:s.damage_description||""}),t.damage_description&&r.damage_description&&(0,a.jsxs)("p",{className:"error-message mt-1 text-sm text-destructive flex items-center",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-1"}),r.damage_description]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsxs)("label",{htmlFor:"repairCost",className:"form-label",children:["Repair Cost Estimate ",(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"(Optional)"})]}),(0,a.jsx)("input",{type:"text",id:"repairCost",name:"repair_cost",className:"form-input",placeholder:"$1,500",onChange:n,value:s.repair_cost||""})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Insurance Claim Filed?"}),(0,a.jsxs)("div",{className:"mt-2 flex items-center space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"insurance_claim",value:"yes",className:"mr-2",onChange:i,checked:"yes"===s.insurance_claim}),"Yes"]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"insurance_claim",value:"no",className:"mr-2",onChange:i,checked:"no"===s.insurance_claim||!s.insurance_claim}),"No"]})]})]}),(0,a.jsxs)("div",{className:"form-group insurance-fields ".concat("yes"!==s.insurance_claim?"hidden":""),children:[(0,a.jsx)("label",{htmlFor:"insuranceExcess",className:"form-label",children:"Insurance Excess Amount"}),(0,a.jsx)("input",{type:"text",id:"insuranceExcess",name:"insurance_excess",className:"form-input",placeholder:"$500",onChange:n,value:s.insurance_excess||""})]}),(0,a.jsxs)("div",{className:"form-group insurance-fields ".concat("yes"!==s.insurance_claim?"hidden":""),children:[(0,a.jsx)("label",{htmlFor:"insuranceClaimNumber",className:"form-label",children:"Insurance Claim Number"}),(0,a.jsx)("input",{type:"text",id:"insuranceClaimNumber",name:"insurance_claim_number",className:"form-input",placeholder:"CLM123456789",onChange:n,value:s.insurance_claim_number||""})]})]})]}),(0,a.jsx)("div",{className:"mt-8 flex justify-end",children:(0,a.jsxs)(u.$,{onClick:l,size:"lg",children:["Continue to Evidence Upload",(0,a.jsx)(v.A,{className:"ml-2 h-4 w-4"})]})})]})]})}var y=t(4355),w=t(9890),_=t(2525),S=t(2355),A=t(6766);function T(e){let{uploadedFiles:s,errors:t,isUploading:n,handleFileSelect:i,handleRemoveFile:l,handleBack:o,handleNext:d,formatFileSize:m}=e,h=(0,r.useRef)(null),x=e=>e.startsWith("image/")?(0,a.jsx)(y.A,{className:"h-5 w-5 text-primary"}):(0,a.jsx)(w.A,{className:"h-5 w-5 text-primary"});return(0,a.jsxs)("div",{id:"step2Content",children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Upload Evidence"}),(0,a.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Upload photos and documents that support your case. This evidence strengthens your claim."})]}),(0,a.jsxs)("div",{className:"mx-auto max-w-4xl",children:[(0,a.jsxs)("div",{className:"mb-8 rounded-xl border border-border/60 bg-card p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Upload Photos & Documents"}),(0,a.jsxs)("div",{className:"mb-6 flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-8 transition-colors ".concat(t.uploads?"border-destructive bg-destructive/5":"border-muted-foreground/25 hover:bg-muted/50"),children:[(0,a.jsx)("input",{type:"file",id:"fileUpload",ref:h,className:"hidden",multiple:!0,accept:"image/*,.pdf,.doc,.docx",onChange:i}),(0,a.jsx)(c.A,{className:"mb-3 h-10 w-10 text-muted-foreground"}),(0,a.jsxs)("p",{className:"mb-2 text-center text-sm font-medium",children:["Drag and drop files here, or"," ",(0,a.jsx)(u.$,{variant:"link",className:"p-0 h-auto text-primary",onClick:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.click()},disabled:n,children:"browse"})]}),(0,a.jsx)("p",{className:"text-center text-xs text-muted-foreground",children:"Supported formats: JPG, PNG, PDF, DOC, DOCX (Max 10MB per file)"}),n&&(0,a.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,a.jsx)("div",{className:"spinner mr-2"}),(0,a.jsx)("span",{className:"text-sm",children:"Uploading..."})]}),t.uploads&&(0,a.jsxs)("p",{className:"error-message mt-3 text-sm text-destructive flex items-center",children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-1"}),t.uploads]})]}),(0,a.jsxs)("div",{className:"mb-6 rounded-lg bg-muted p-4",children:[(0,a.jsx)("h4",{className:"mb-2 font-medium",children:"Recommended Evidence Types:"}),(0,a.jsxs)("ul",{className:"ml-5 list-disc space-y-1 text-sm text-muted-foreground",children:[(0,a.jsx)("li",{children:"Photos of the vehicle damage (before and after service)"}),(0,a.jsx)("li",{children:"Service invoice or receipt"}),(0,a.jsx)("li",{children:"Written communications with the mechanic"}),(0,a.jsx)("li",{children:"Independent mechanic assessment or quote"}),(0,a.jsx)("li",{children:"Vehicle registration documents"})]})]}),s.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"mb-3 font-medium",children:["Uploaded Files (",s.length,")"]}),(0,a.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[e.type.startsWith("image/")?(0,a.jsx)("div",{className:"relative h-10 w-10 overflow-hidden rounded-md mr-3",children:(0,a.jsx)(A.default,{src:e.url||"/placeholder.svg",alt:e.name,fill:!0,className:"object-cover"})}):(0,a.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-md bg-muted mr-3",children:x(e.type)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate max-w-[200px] sm:max-w-[300px]",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:m(e.size)})]})]}),(0,a.jsxs)(u.$,{variant:"ghost",size:"icon",onClick:()=>l(e.id),className:"text-muted-foreground hover:text-destructive",children:[(0,a.jsx)(_.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Remove file"})]})]},e.id))})]})]}),(0,a.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,a.jsxs)(u.$,{onClick:o,variant:"outline",size:"lg",children:[(0,a.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Back to Details"]}),(0,a.jsxs)(u.$,{onClick:d,size:"lg",children:["Continue to Review",(0,a.jsx)(v.A,{className:"ml-2 h-4 w-4"})]})]})]})]})}var D=t(1154);function E(e){let{formData:s,uploadedFiles:t,isGenerating:r,handleBack:n,handleNext:i,goToStep:l}=e;return(0,a.jsxs)("div",{id:"step3Content",children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Review Your Information"}),(0,a.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Please review all details before proceeding to payment and document generation."})]}),(0,a.jsxs)("div",{className:"mx-auto max-w-4xl",children:[(0,a.jsxs)("div",{className:"mb-8 rounded-xl border border-border/60 bg-card p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Document Summary"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Document Type"}),(0,a.jsx)("p",{className:"mt-1",children:s.document_type?N[s.document_type]:"Not selected"})]}),(0,a.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Your Information"}),(0,a.jsxs)("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Name:"}),(0,a.jsx)("p",{children:s.customer_name||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Email:"}),(0,a.jsx)("p",{children:s.customer_email||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Phone:"}),(0,a.jsx)("p",{children:s.customer_phone||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Address:"}),(0,a.jsx)("p",{children:s.customer_address||"Not provided"})]})]})]}),(0,a.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Mechanic Information"}),(0,a.jsxs)("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Business Name:"}),(0,a.jsx)("p",{children:s.mechanic_name||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"ABN:"}),(0,a.jsx)("p",{children:s.mechanic_abn||"Not provided"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Address:"}),(0,a.jsx)("p",{children:s.mechanic_address||"Not provided"})]})]})]}),(0,a.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Vehicle and Damage Details"}),(0,a.jsxs)("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Vehicle:"}),(0,a.jsx)("p",{children:s.vehicle_details||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Service Date:"}),(0,a.jsx)("p",{children:s.service_date||"Not provided"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Damage Description:"}),(0,a.jsx)("p",{children:s.damage_description||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Repair Cost Estimate:"}),(0,a.jsx)("p",{children:s.repair_cost||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Insurance Claim:"}),(0,a.jsx)("p",{children:"yes"===s.insurance_claim?"Yes":"No"})]}),"yes"===s.insurance_claim&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Insurance Excess:"}),(0,a.jsx)("p",{children:s.insurance_excess||"Not provided"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Claim Number:"}),(0,a.jsx)("p",{children:s.insurance_claim_number||"Not provided"})]})]})]})]}),(0,a.jsxs)("div",{className:"rounded-lg bg-muted p-4",children:[(0,a.jsx)("h4",{className:"font-medium",children:"Uploaded Evidence"}),t.length>0?(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Files Uploaded: ",t.length]}),(0,a.jsx)("ul",{className:"mt-1 ml-5 list-disc space-y-1 text-sm",children:t.map(e=>(0,a.jsx)("li",{children:e.name},e.id))})]}):(0,a.jsx)("p",{className:"mt-1 text-sm text-destructive",children:"No files uploaded"})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex flex-wrap gap-3",children:[(0,a.jsx)(u.$,{variant:"outline",size:"sm",onClick:()=>l(1),children:"Edit Details"}),(0,a.jsx)(u.$,{variant:"outline",size:"sm",onClick:()=>l(2),children:"Edit Evidence"})]})]}),(0,a.jsxs)("div",{className:"mb-8 rounded-xl border border-border/60 bg-card p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Terms and Conditions"}),(0,a.jsxs)("div",{className:"mb-4 rounded-lg bg-muted p-4 text-sm text-muted-foreground",children:[(0,a.jsx)("p",{className:"mb-2",children:"By proceeding to payment, you acknowledge that:"}),(0,a.jsxs)("ul",{className:"ml-5 list-disc space-y-1",children:[(0,a.jsx)("li",{children:"The information you have provided is accurate and complete."}),(0,a.jsx)("li",{children:"The document generated is based on the information you have provided."}),(0,a.jsx)("li",{children:"This service provides document templates and is not a substitute for professional legal advice."}),(0,a.jsxs)("li",{children:["You have read and agree to our"," ",(0,a.jsx)("a",{href:"#",className:"text-primary underline",children:"Terms of Service"})," ","and"," ",(0,a.jsx)("a",{href:"#",className:"text-primary underline",children:"Privacy Policy"}),"."]})]})]})]}),(0,a.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,a.jsxs)(u.$,{onClick:n,variant:"outline",size:"lg",children:[(0,a.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Back to Evidence"]}),(0,a.jsx)(u.$,{onClick:i,size:"lg",disabled:r,children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating Document..."]}):(0,a.jsxs)(a.Fragment,{children:["Generate Document",(0,a.jsx)(v.A,{className:"ml-2 h-4 w-4"})]})})]})]})]})}var C=t(1284),P=t(9509);function k(e){let{documentData:s,isProcessingPayment:t,handleBack:n,handleNext:i,formatCurrency:l,paymentSuccess:c=!1}=e,[o,d]=(0,r.useState)(null),[m,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(null==s?void 0:s.filename)&&p(s.filename)},[s]),(0,r.useEffect)(()=>{c&&h(!0)},[c]);let p=async e=>{try{let s=await fetch("/documents/view/".concat(e));if(!s.ok)throw Error("Failed to fetch document preview");let t=await s.text();d(t)}catch(e){console.error("Error fetching document preview:",e)}};return(0,a.jsxs)("div",{id:"step4Content",className:"relative min-h-[80vh] w-full document-preview",children:[o&&(0,a.jsx)("div",{className:"absolute inset-0 w-full transition-all duration-500 ease-in-out ".concat(m?"z-50 document-focus document-reveal":"z-0 document-blur document-preview-floating"),children:(0,a.jsx)("div",{className:"relative w-full mx-auto ".concat(m?"":"transform perspective-1000"),children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-2xl overflow-hidden max-h-[90vh] overflow-y-auto",dangerouslySetInnerHTML:{__html:o}})})}),(0,a.jsx)("div",{className:"relative z-10 transition-all duration-500 ease-in-out ".concat(m?"opacity-0 pointer-events-none payment-modal-exit":"opacity-100 pointer-events-auto"),children:(0,a.jsxs)("div",{className:"mx-auto max-w-2xl bg-white/95 backdrop-blur-sm rounded-xl p-8 shadow-xl border border-border/60 payment-card",children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Complete Payment"}),(0,a.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Your document is ready! Complete the payment to access the full document."})]}),(0,a.jsxs)("div",{className:"mb-8 rounded-xl border border-border/60 bg-card p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Document Summary"}),(0,a.jsx)("div",{className:"mb-6 rounded-lg bg-muted p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium",children:(null==s?void 0:s.documentType)||"Legal Document"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Professional document tailored to your situation"})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsx)("p",{className:"text-lg font-semibold",children:l(49.99)})})]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between py-1",children:[(0,a.jsx)("span",{children:"Document Fee"}),(0,a.jsx)("span",{children:l(49.99)})]}),(0,a.jsxs)("div",{className:"flex justify-between py-1",children:[(0,a.jsx)("span",{children:"GST (10%)"}),(0,a.jsx)("span",{children:l(49.99*.1)})]}),(0,a.jsxs)("div",{className:"flex justify-between py-1 font-semibold border-t border-border/60 mt-2 pt-2",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsx)("span",{children:l(49.99*1.1)})]})]})]}),(0,a.jsxs)("div",{className:"mb-8 rounded-xl border border-border/60 bg-card p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Payment Details"}),"true"===P.env.NEXT_PUBLIC_BYPASS_PAYMENT?(0,a.jsx)("div",{className:"rounded-lg bg-muted p-4 text-sm",children:(0,a.jsxs)("p",{className:"flex items-center",children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4 text-primary"}),'Payment is bypassed in development mode. Click "Complete Payment" to proceed.']})}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"You will be redirected to our secure payment processor to complete your payment."}),(0,a.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)("span",{children:"Your payment information is secure and encrypted"})]})]})]}),(0,a.jsxs)("div",{className:"mt-8 flex justify-between",children:[(0,a.jsxs)(u.$,{onClick:n,variant:"outline",size:"lg",children:[(0,a.jsx)(S.A,{className:"mr-2 h-4 w-4"}),"Back to Review"]}),(0,a.jsx)(u.$,{onClick:"true"===P.env.NEXT_PUBLIC_BYPASS_PAYMENT?()=>{h(!0),i()}:i,size:"lg",disabled:t,children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing Payment..."]}):(0,a.jsxs)(a.Fragment,{children:["Complete Payment",(0,a.jsx)(v.A,{className:"ml-2 h-4 w-4"})]})})]})]})})]})}function I(e){let{documentData:s,handleStartOver:t}=e;return(0,a.jsx)("div",{id:"step5Content",children:(0,a.jsxs)("div",{className:"mx-auto max-w-2xl text-center",children:[(0,a.jsx)("div",{className:"mb-6 flex justify-center",children:(0,a.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-success/20 text-success",children:(0,a.jsx)(o.A,{className:"h-8 w-8"})})}),(0,a.jsx)("h2",{className:"mb-3 text-2xl font-bold text-gray-900",children:"Payment Successful!"}),(0,a.jsx)("p",{className:"mb-8 text-muted-foreground",children:"Your document has been generated successfully and is ready for download."}),(0,a.jsxs)("div",{className:"mb-8 rounded-xl border border-border/60 bg-card p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Your Document"}),(0,a.jsx)("p",{className:"mb-4 text-sm text-muted-foreground",children:"Download your professionally generated document below."}),(0,a.jsxs)(u.$,{size:"lg",className:"w-full",onClick:()=>{(null==s?void 0:s.filename)&&window.open("/api/documents/".concat(s.filename,"?download=true"),"_blank")},children:[(0,a.jsx)(m.A,{className:"mr-2 h-5 w-5"}),"Download PDF Document"]}),(0,a.jsx)("p",{className:"mt-4 text-xs text-muted-foreground",children:"A copy of your document has also been sent to your email address."})]}),(0,a.jsxs)("div",{className:"mb-8 rounded-xl border border-border/60 bg-card p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Document Details"}),(0,a.jsxs)("div",{className:"space-y-3 text-left",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Document Type:"}),(0,a.jsx)("span",{className:"font-medium",children:(null==s?void 0:s.documentType)||"Legal Document"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Generated On:"}),(0,a.jsx)("span",{className:"font-medium",children:new Date().toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Reference Number:"}),(0,a.jsx)("span",{className:"font-medium",children:(null==s?void 0:s.filename)||"DOC12345678"})]})]}),(0,a.jsx)("div",{className:"mt-4 rounded-lg bg-muted p-3 text-sm",children:(0,a.jsxs)("p",{className:"flex items-center",children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4 text-primary"}),"Your document is permanently stored and can be accessed at any time."]})})]}),(0,a.jsxs)("div",{className:"mt-8 rounded-xl border border-border/60 bg-card p-6 shadow-sm",children:[(0,a.jsx)("h3",{className:"mb-2 text-lg font-semibold text-gray-900",children:"What's Next?"}),(0,a.jsxs)("ol",{className:"mb-4 list-inside list-decimal space-y-2 text-left text-sm text-muted-foreground",children:[(0,a.jsx)("li",{children:"Review your document carefully"}),(0,a.jsx)("li",{children:"Print or save a copy for your records"}),(0,a.jsx)("li",{children:"Send the document to the mechanic via registered mail or email"}),(0,a.jsx)("li",{children:"Keep track of all communication with the mechanic"}),(0,a.jsx)("li",{children:"Follow up after the specified response deadline"})]}),(0,a.jsx)(u.$,{variant:"outline",onClick:t,className:"mt-4 w-full",children:"Start a New Dispute"})]})]})})}function O(){return(0,a.jsx)("section",{className:"bg-muted py-16",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"mb-12 text-center",children:[(0,a.jsx)("h2",{className:"mb-3 text-3xl font-bold text-gray-900",children:"What Our Customers Say"}),(0,a.jsx)("p",{className:"mx-auto max-w-2xl text-muted-foreground",children:"Join thousands of Australians who have successfully resolved their mechanic disputes using our service."})]}),(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsxs)("div",{className:"testimonial-card",children:[(0,a.jsx)("div",{className:"mb-4 flex text-warning",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)(p.A,{className:"h-5 w-5 fill-current"},s))}),(0,a.jsx)("p",{className:"mb-4 text-muted-foreground",children:'"The letter of demand worked perfectly. The mechanic responded within a week and agreed to pay for the repairs. The document was professional and clearly outlined my rights."'}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-10 w-10 overflow-hidden rounded-full relative",children:(0,a.jsx)(A.default,{src:"https://service.firecrawl.dev/storage/v1/object/public/media/screenshot-20806a1a-adff-48bf-8a59-37897a071aee.png",alt:"Sarah T.",fill:!0,className:"object-cover"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Sarah T."}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Sydney, NSW"})]})]})]}),(0,a.jsxs)("div",{className:"testimonial-card",children:[(0,a.jsx)("div",{className:"mb-4 flex text-warning",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)(p.A,{className:"h-5 w-5 fill-current"},s))}),(0,a.jsx)("p",{className:"mb-4 text-muted-foreground",children:'"I was at a loss about what to do when my car was damaged during servicing. This service made it easy to create a professional document that got results fast."'}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-10 w-10 overflow-hidden rounded-full relative",children:(0,a.jsx)(A.default,{src:"https://service.firecrawl.dev/storage/v1/object/public/media/screenshot-fb527744-40da-481b-b92a-353b2675e9cb.png",alt:"Michael R.",fill:!0,className:"object-cover"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Michael R."}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Melbourne, VIC"})]})]})]}),(0,a.jsxs)("div",{className:"testimonial-card",children:[(0,a.jsx)("div",{className:"mb-4 flex text-warning",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)(p.A,{className:"h-5 w-5 fill-current"},s))}),(0,a.jsx)("p",{className:"mb-4 text-muted-foreground",children:'"Worth every cent! The mechanic initially refused to take responsibility, but after receiving my professionally drafted letter, they quickly changed their tune."'}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"h-10 w-10 overflow-hidden rounded-full relative",children:(0,a.jsx)(A.default,{src:"https://service.firecrawl.dev/storage/v1/object/public/media/screenshot-8691a9e1-3484-4f50-a97f-737fd0acbcb8.png",alt:"James L.",fill:!0,className:"object-cover"})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"James L."}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Brisbane, QLD"})]})]})]})]})]})})}function F(e){let{startClaim:s}=e;return(0,a.jsx)("section",{className:"bg-primary py-16 text-primary-foreground",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"mx-auto max-w-3xl text-center",children:[(0,a.jsx)("h2",{className:"mb-4 text-3xl font-bold",children:"Ready to Resolve Your Mechanic Dispute?"}),(0,a.jsx)("p",{className:"mb-8 text-lg opacity-90",children:"Our professional document generator makes it easy to stand up for your rights and get the resolution you deserve."}),(0,a.jsxs)(u.$,{size:"lg",variant:"secondary",onClick:s,children:["Start Your Claim Now",(0,a.jsx)(h.A,{className:"ml-2 h-4 w-4"})]})]})})})}function M(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB"}function R(e){return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD"}).format(e)}async function U(e){try{let s=new FormData;s.append("photo",e);let t="case_".concat(Math.random().toString(36).substring(2,10));s.append("case_id",t);let a=await fetch("/api/upload-photo",{method:"POST",body:s});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to upload file")}let r=await a.json();return{id:r.photoId,name:e.name,size:e.size,type:e.type,url:r.url,uploadDate:new Date().toISOString()}}catch(e){throw console.error("Error uploading file:",e),e}}var Y=t(9509);async function B(e,s){try{let t=new FormData;Object.entries(e).forEach(e=>{let[s,a]=e;t.append(s,a)}),s.forEach((e,s)=>{t.append("evidence_".concat(s),e.name),t.append("evidence_".concat(s,"_type"),e.type),t.append("evidence_".concat(s,"_url"),e.url)});let a=await fetch("/api/generate-document",{method:"POST",body:t});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to generate document")}let r=await a.json();if(!r.success)throw Error(r.error||"Document generation failed");return r}catch(e){throw console.error("Error generating document:",e),e}}async function L(e,s){try{let t="letter_of_demand"===s.document_type?"Letter of Demand":"Legal Document",a=await fetch("/api/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:e.filename,productName:t,amount:49.99,customerName:s.customer_name,customerEmail:s.customer_email})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to create checkout session")}return await a.json()}catch(e){throw console.error("Error creating checkout session:",e),e}}async function z(e,s,t){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];try{if(console.log("processPayment called with clientSecret:",t?t.substring(0,10)+"...":"missing"),a)return console.log("Payment bypassed for enhanced UI experience"),await new Promise(e=>setTimeout(e,1e3)),!0;if(!s)throw console.error("stripePromise is missing"),Error("Stripe is not properly initialized");if(!t)throw console.error("clientSecret is missing"),Error("No checkout session ID available");if("true"===Y.env.NEXT_PUBLIC_BYPASS_PAYMENT)return console.log("Payment bypassed in development mode"),await new Promise(e=>setTimeout(e,1e3)),!0;console.log("Initializing Stripe and redirecting to checkout...");let e=await s;if(!e)throw console.error("Failed to initialize Stripe"),Error("Payment provider initialization failed");console.log("Calling stripe.redirectToCheckout with sessionId:",t);let{error:r}=await e.redirectToCheckout({sessionId:t});if(r)throw console.error("Stripe redirectToCheckout error:",r),Error(r.message);return!0}catch(e){throw console.error("Payment error:",e),e}}async function $(e){try{let s=await fetch("/api/check-payment?session_id=".concat(e));if(!s.ok)throw Error("Failed to check payment status");let t=await s.json();return"paid"===t.status}catch(e){return console.error("Error checking payment status:",e),!1}}var V=t(9509);let J={FORM_DATA:"mechanic_dispute_form_data",UPLOADED_FILES:"mechanic_dispute_uploaded_files",CURRENT_STEP:"mechanic_dispute_current_step",CLAIM_STARTED:"mechanic_dispute_claim_started",DOCUMENT_DATA:"mechanic_dispute_document_data"};function W(){let[e,s]=(0,r.useState)(1),[t,u]=(0,r.useState)(!1),[h,x]=(0,r.useState)({}),[p,j]=(0,r.useState)({}),[v,N]=(0,r.useState)([]),[y,w]=(0,r.useState)(!1),[_,S]=(0,r.useState)({}),[A,D]=(0,r.useState)(!1),[C,P]=(0,r.useState)(!1),[Y,W]=(0,r.useState)(null),[q,G]=(0,r.useState)(!1),[X,K]=(0,r.useState)(null),[H,Q]=(0,r.useState)("");(0,n.useRouter)();let{toast:Z}=(0,i.dj)();(0,r.useEffect)(()=>{window.Stripe&&K(window.Stripe("pk_test_51PxizFK4JiRaEXouPJmJWSSJwu3pZUBwU2tq3BVWuXm4s607Y5fwBfhXMTIkeOg47K3BrFT8GUEjCah3gM1BLYAK00mrMMPqjF"))},[]),(0,r.useEffect)(()=>{try{let e=localStorage.getItem(J.FORM_DATA);e&&S(JSON.parse(e));let t=localStorage.getItem(J.UPLOADED_FILES);t&&N(JSON.parse(t));let a=localStorage.getItem(J.DOCUMENT_DATA);a&&W(JSON.parse(a));let r=localStorage.getItem(J.CURRENT_STEP);r&&s(parseInt(r,10));let n=localStorage.getItem(J.CLAIM_STARTED);n?u(JSON.parse(n)):u(!1)}catch(e){console.error("Error loading saved form data:",e),ee()}},[]),(0,r.useEffect)(()=>{Object.keys(_).length>0&&localStorage.setItem(J.FORM_DATA,JSON.stringify(_))},[_]),(0,r.useEffect)(()=>{v.length>0&&localStorage.setItem(J.UPLOADED_FILES,JSON.stringify(v))},[v]),(0,r.useEffect)(()=>{Y&&localStorage.setItem(J.DOCUMENT_DATA,JSON.stringify(Y))},[Y]),(0,r.useEffect)(()=>{localStorage.setItem(J.CURRENT_STEP,e.toString())},[e]),(0,r.useEffect)(()=>{localStorage.setItem(J.CLAIM_STARTED,JSON.stringify(t))},[t]);let ee=()=>{localStorage.removeItem(J.FORM_DATA),localStorage.removeItem(J.UPLOADED_FILES),localStorage.removeItem(J.CURRENT_STEP),localStorage.removeItem(J.CLAIM_STARTED),localStorage.removeItem(J.DOCUMENT_DATA)},es=[{id:1,title:"Enter Details",icon:l.A},{id:2,title:"Upload Evidence",icon:c.A},{id:3,title:"Review",icon:o.A},{id:4,title:"Payment",icon:d.A},{id:5,title:"Download",icon:m.A}],et=e=>{let{name:s,value:t}=e.target;S(e=>({...e,[s]:t})),j(e=>({...e,[s]:!0})),h[s]&&x(e=>({...e,[s]:void 0}))},ea=e=>{let{value:s}=e.target;S(e=>({...e,insurance_claim:s}))},er=async e=>{let s=Array.from(e.target.files);if(0!==s.length){w(!0);try{let e=s.map(e=>U(e)),t=await Promise.all(e);N(e=>[...e,...t]),h.uploads&&x(e=>({...e,uploads:void 0})),Z({title:"Files uploaded",description:"".concat(s.length," file(s) uploaded successfully")})}catch(e){console.error("Error uploading files:",e),Z({title:"Upload failed",description:e.message||"There was a problem uploading your files. Please try again.",variant:"destructive"})}finally{w(!1),e.target.value=""}}},en=e=>{N(s=>s.filter(s=>s.id!==e)),v.length<=1&&x(e=>({...e,uploads:"Please upload at least one photo or document as evidence"})),Z({title:"File removed",description:"The file has been removed from your evidence"})},ei=async()=>{let t=!0,a=!0;if(1===e){let e=document.getElementById("disputeForm");if(e){let s=e.elements,t={};for(let e=0;e<s.length;e++){let a=s[e];a.name&&(t[a.name]=!0)}j(t)}let s=function(e,s){let t={},a=!0;e.document_type||(t.document_type="Please select a document type",a=!1);let r=e.customer_name||"";r?r.length<3&&(t.customer_name="Name must be at least 3 characters",a=!1):(t.customer_name="Please enter your full name",a=!1);let n=e.customer_email||"";n?/^\S+@\S+\.\S+$/.test(n)||(t.customer_email="Please enter a valid email address",a=!1):(t.customer_email="Please enter your email address",a=!1);let i=e.customer_phone||"";i&&!/^[0-9\s+()-]{8,15}$/.test(i)&&(t.customer_phone="Please enter a valid phone number",a=!1),e.mechanic_name||(t.mechanic_name="Please enter the mechanic's business name",a=!1);let l=e.damage_description||"";return l?l.length<10&&(t.damage_description="Please provide more details about the damage",a=!1):(t.damage_description="Please describe the damage to your vehicle",a=!1),{errors:t,isValid:a}}(_,0);x(s.errors),t=s.isValid}else if(2===e){let e=function(e,s){let t={...s},a=!0;return 0===e.length?(t.uploads="Please upload at least one photo or document as evidence",a=!1):delete t.uploads,{errors:t,isValid:a}}(v,h);x(e.errors),t=e.isValid}else if(3===e){D(!0);try{let e=await B(_,v);W(e);let s=await L(e,_);Q(s.sessionId||s.id),Z({title:"Document generated successfully",description:"Your document is ready for review"}),a=!0}catch(e){Z({title:"Error generating document",description:e.message||"There was a problem generating your document. Please try again.",variant:"destructive"}),a=!1}finally{D(!1)}}else if(4===e){P(!0);try{if(console.log("Payment step handleNext called, clientSecret:",H?"exists":"missing"),"true"===V.env.NEXT_PUBLIC_BYPASS_PAYMENT){let e=await z(Y,X,H,!0);a=e,e&&(G(!0),Z({title:"Payment successful",description:"Your payment has been processed successfully"}))}else{if(!H){if(console.log("No client secret found, regenerating checkout session..."),!await ec())throw Error("Failed to prepare payment. Please try again.");console.log("Regenerated client secret:",H?"exists":"still missing")}console.log("Proceeding with payment using clientSecret:",H);let e=await z(Y,X,H);a=e,e&&(G(!0),Z({title:"Payment successful",description:"Your payment has been processed successfully"}))}a&&ee()}catch(e){console.error("Payment process error:",e),Z({title:"Payment failed",description:e.message||"There was a problem processing your payment. Please try again.",variant:"destructive"}),a=!1}finally{P(!1)}}if(t&&a)e<es.length&&(s(e+1),u(!0),window.scrollTo(0,0),Z({title:"Progress saved",description:"Moving to step ".concat(e+1,": ").concat(es[e].title)}));else if(!t){Z({title:"Validation failed",description:"Please correct the errors before proceeding",variant:"destructive"});let e=document.querySelector(".error-message");e&&e.scrollIntoView({behavior:"smooth",block:"center"})}},el=()=>{e>1&&(s(e-1),window.scrollTo(0,0))},ec=async()=>{console.log("Starting checkout session regeneration..."),P(!0);try{if(!Y&&Object.keys(_).length>0&&v.length>0){console.log("Document data missing, regenerating document first...");try{let e=await B(_,v);W(e),console.log("Document regeneration successful:",e),console.log("Creating checkout session with regenerated document data...");let s=await L(e,_);if(!s||!s.sessionId&&!s.id)throw Error("Invalid checkout session response from server");let t=s.sessionId||s.id;return console.log("Successfully obtained new checkout session ID:",t),Q(t),P(!1),!0}catch(e){return console.error("Error regenerating document:",e),Z({title:"Error preparing document",description:"There was a problem regenerating your document. Please go back to the review step and try again.",variant:"destructive"}),P(!1),!1}}if(!Y)return console.error("Cannot regenerate checkout session: No document data available"),Z({title:"Error preparing payment",description:"Unable to prepare payment. Please generate your document first.",variant:"destructive"}),P(!1),!1;console.log("Calling createCheckoutSession API...");let e=await L(Y,_);if(!e||!e.sessionId&&!e.id)throw Error("Invalid checkout session response from server");let s=e.sessionId||e.id;return console.log("Successfully obtained new checkout session ID:",s),Q(s),P(!1),!0}catch(e){return console.error("Error regenerating checkout session:",e),Z({title:"Error preparing payment",description:"There was a problem preparing the payment. Please try again.",variant:"destructive"}),P(!1),!1}},eo=()=>{u(!0),s(1),window.scrollTo(0,0),Z({title:"Let's get started",description:"Fill out the form to generate your legal document"})},ed=()=>{s(1),u(!1),x({}),j({}),N([]),S({}),W(null),G(!1),Q(""),window.scrollTo(0,0),ee(),Z({title:"Form reset",description:"You can start a new dispute claim"})};return(0,r.useEffect)(()=>{"true"===new URLSearchParams(window.location.search).get("payment_cancelled")&&Y&&(s(3),window.history.replaceState({},document.title,window.location.pathname),Z({title:"Payment cancelled",description:"You can try again or make changes to your document"}))},[Y]),(0,r.useEffect)(()=>{(async()=>{let e=new URLSearchParams(window.location.search).get("session_id");e&&await $(e)&&(G(!0),s(5),ee(),Z({title:"Payment successful",description:"Your payment has been processed successfully"}),window.history.replaceState({},document.title,window.location.pathname))})()},[]),(0,r.useEffect)(()=>{if(4===e){console.log("On payment step, checking requirements...",{hasDocumentData:!!Y,hasFormData:Object.keys(_).length>0,hasUploadedFiles:v.length>0});let e=setTimeout(()=>{ec()},300);return()=>clearTimeout(e)}},[e]),(0,a.jsxs)("main",{children:[(0,a.jsx)(f,{claimStarted:t,startClaim:eo,handleStartOver:ed,currentStep:e,steps:es}),(0,a.jsxs)("div",{className:"mt-10 sm:mt-16 mb-16 mx-auto px-4 sm:px-6 md:px-8 max-w-4xl",children:[(0,a.jsx)(g,{currentStep:e,steps:es,goToStep:t=>{t<=e&&(s(t),window.scrollTo(0,0),4===t&&ec())}}),(0,a.jsx)("div",{className:"mt-10",children:(()=>{switch(e){case 1:return(0,a.jsx)(b,{formData:_,formTouched:p,errors:h,handleInputChange:et,handleInsuranceChange:ea,handleNext:ei});case 2:return(0,a.jsx)(T,{uploadedFiles:v,isUploading:y,handleFileSelect:er,handleRemoveFile:en,handleBack:el,handleNext:ei,errors:h,formatFileSize:M});case 3:return(0,a.jsx)(E,{formData:_,uploadedFiles:v,isGenerating:A,handleBack:el,handleNext:ei,formatFileSize:M});case 4:return(0,a.jsx)(k,{documentData:Y,isProcessingPayment:C,handleBack:el,handleNext:ei,formatCurrency:R,paymentSuccess:q});case 5:return(0,a.jsx)(I,{documentData:Y,handleBack:el,handleStartOver:ed});default:return(0,a.jsx)(b,{formData:_,formTouched:p,errors:h,handleInputChange:et})}})()})]}),!t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O,{}),(0,a.jsx)(F,{startClaim:eo})]})]})}},3999:(e,s,t)=>{"use strict";t.d(s,{cn:()=>n});var a=t(2596),r=t(9688);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},4641:(e,s,t)=>{"use strict";t.d(s,{dj:()=>h});var a=t(2115);let r={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"},n=0,i=new Map,l=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),m({type:r.REMOVE_TOAST,toastId:e})},5e3);i.set(e,s)},c=(e,s)=>{switch(s.type){case r.ADD_TOAST:return{...e,toasts:[s.toast,...e.toasts].slice(0,5)};case r.UPDATE_TOAST:return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case r.DISMISS_TOAST:{let{toastId:t}=s;return t?l(t):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case r.REMOVE_TOAST:if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},o=[],d={toasts:[]};function m(e){d=c(d,e),o.forEach(e=>{e(d)})}function u(e){let{...s}=e,t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>m({type:r.DISMISS_TOAST,toastId:t});return m({type:r.ADD_TOAST,toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>m({type:r.UPDATE_TOAST,toast:{...e,id:t}})}}function h(){let[e,s]=a.useState(d);return a.useEffect(()=>(o.push(s),()=>{let e=o.indexOf(s);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>m({type:r.DISMISS_TOAST,toastId:e})}}},5835:(e,s,t)=>{Promise.resolve().then(t.bind(t,3343))},7168:(e,s,t)=>{"use strict";t.d(s,{$:()=>o});var a=t(5155),r=t(2115),n=t(9708),i=t(2085),l=t(3999);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,s)=>{let{className:t,variant:r,size:i,asChild:o=!1,...d}=e,m=o?n.DX:"button";return(0,a.jsx)(m,{className:(0,l.cn)(c({variant:r,size:i,className:t})),ref:s,...d})});o.displayName="Button"}},e=>{var s=s=>e(e.s=s);e.O(0,[455,60,441,684,358],()=>s(5835)),_N_E=e.O()}]);