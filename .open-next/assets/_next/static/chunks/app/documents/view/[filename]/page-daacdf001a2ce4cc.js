(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[649],{3774:(e,t,a)=>{Promise.resolve().then(a.bind(a,9011))},3999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r});var s=a(2596),n=a(9688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,s.$)(t))}},4641:(e,t,a)=>{"use strict";a.d(t,{dj:()=>f});var s=a(2115);let n={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"},r=0,o=new Map,i=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),m({type:n.REMOVE_TOAST,toastId:e})},5e3);o.set(e,t)},d=(e,t)=>{switch(t.type){case n.ADD_TOAST:return{...e,toasts:[t.toast,...e.toasts].slice(0,5)};case n.UPDATE_TOAST:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case n.DISMISS_TOAST:{let{toastId:a}=t;return a?i(a):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case n.REMOVE_TOAST:if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function m(e){c=d(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>m({type:n.DISMISS_TOAST,toastId:a});return m({type:n.ADD_TOAST,toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>m({type:n.UPDATE_TOAST,toast:{...e,id:a}})}}function f(){let[e,t]=s.useState(c);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>m({type:n.DISMISS_TOAST,toastId:e})}}},7168:(e,t,a)=>{"use strict";a.d(t,{$:()=>l});var s=a(5155),n=a(2115),r=a(9708),o=a(2085),i=a(3999);let d=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=n.forwardRef((e,t)=>{let{className:a,variant:n,size:o,asChild:l=!1,...c}=e,m=l?r.DX:"button";return(0,s.jsx)(m,{className:(0,i.cn)(d({variant:n,size:o,className:a})),ref:t,...c})});l.displayName="Button"},9011:(e,t,a)=>{"use strict";a.d(t,{default:()=>M});var s=a(5155),n=a(9137),r=a.n(n),o=a(2115),i=a(3999);let d=o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});d.displayName="Card",o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...n})}).displayName="CardHeader",o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})}).displayName="CardTitle",o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...n})}).displayName="CardDescription",o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",a),...n})}).displayName="CardContent",o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",a),...n})}).displayName="CardFooter";var l=a(7168),c=a(3651),m=a(4416);let u=c.bL;c.l9;let f=c.ZL;c.bm;let p=o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(c.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...n})});p.displayName=c.hJ.displayName;let x=o.forwardRef((e,t)=>{let{className:a,children:n,...r}=e;return(0,s.jsxs)(f,{children:[(0,s.jsx)(p,{}),(0,s.jsxs)(c.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r,children:[n,(0,s.jsxs)(c.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(m.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=c.UC.displayName;let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};h.displayName="DialogHeader";let g=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};g.displayName="DialogFooter";let b=o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(c.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...n})});b.displayName=c.hE.displayName;let v=o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(c.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...n})});v.displayName=c.VY.displayName;let w=o.forwardRef((e,t)=>{let{className:a,type:n,...r}=e;return(0,s.jsx)("input",{type:n,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});w.displayName="Input";let j=o.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});j.displayName="Textarea";var y=a(7489);let N=o.forwardRef((e,t)=>{let{className:a,orientation:n="horizontal",decorative:r=!0,...o}=e;return(0,s.jsx)(y.b,{ref:t,decorative:r,orientation:n,className:(0,i.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",a),...o})});N.displayName=y.b.displayName;var S=a(1764);S.Kq,S.bL,S.l9,o.forwardRef((e,t)=>{let{className:a,sideOffset:n=4,...r}=e;return(0,s.jsx)(S.UC,{ref:t,sideOffset:n,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})}).displayName=S.UC.displayName;var T=a(4641),k=a(2355),A=a(6262),C=a(4481),D=a(1264),E=a(1304),O=a(7434),_=a(9890),z=a(5196),R=a(4357),I=a(7918);function M(e){let{html:t,documentName:a,customerName:n,createdAt:i,filename:c}=e,[m,f]=(0,o.useState)(1),[p,y]=(0,o.useState)(1),[S,M]=(0,o.useState)(1),[F,$]=(0,o.useState)(!1),[P,U]=(0,o.useState)(!1),[L,V]=(0,o.useState)(""),[H,q]=(0,o.useState)(""),[X,Y]=(0,o.useState)(!1),[J,Z]=(0,o.useState)(!1),{toast:B}=(0,T.dj)(),G=(0,o.useRef)(null),K=(0,o.useRef)(null);new Date(i).toLocaleDateString("en-AU",{year:"numeric",month:"long",day:"numeric"}),(0,o.useEffect)(()=>{let e=()=>{$(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]);let Q=async e=>{e.preventDefault(),Z(!0);try{let e=await fetch("/api/documents/share",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:c,recipient_email:L,message:H})}),t=await e.json();if(!e.ok)throw Error(t.message||"Failed to share document");B({title:"Document shared",description:"Document shared successfully with ".concat(L),variant:"success",duration:5e3}),U(!1),V(""),q("")}catch(e){console.error("Error sharing document:",e),B({title:"Error",description:"Failed to share document: ".concat(e.message),variant:"destructive",duration:5e3})}finally{Z(!1)}},W=async()=>{B({title:"Preparing PDF",description:"Your document is being prepared for download",duration:3e3}),window.open("/api/documents/download/".concat(c,"?format=pdf"),"_blank")},ee=async()=>{B({title:"Downloading DOCX",description:"Your document is being prepared for download",duration:3e3});let e=document.createElement("a");e.href="/api/documents/download/".concat(c,"?format=docx"),e.setAttribute("download",""),document.body.appendChild(e),e.click(),document.body.removeChild(e)};return(0,s.jsxs)("div",{className:"jsx-dee0d5067efb1ee0 flex flex-col min-h-screen bg-slate-50 print:bg-white",children:[(0,s.jsx)("div",{className:"jsx-dee0d5067efb1ee0 sticky top-0 z-10 bg-white border-b shadow-sm print:hidden",children:(0,s.jsxs)("div",{className:"jsx-dee0d5067efb1ee0 container flex items-center justify-between h-16 px-4 mx-auto",children:[(0,s.jsxs)("div",{className:"jsx-dee0d5067efb1ee0 flex items-center space-x-2",children:[(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>window.history.back(),title:"Back",children:(0,s.jsx)(k.A,{className:"w-5 h-5"})}),(0,s.jsx)("h1",{className:"jsx-dee0d5067efb1ee0 text-lg font-medium truncate max-w-[200px] sm:max-w-md",children:a})]}),(0,s.jsxs)("div",{className:"jsx-dee0d5067efb1ee0 flex items-center space-x-1",children:[(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{f(e=>Math.max(e-.1,.5))},title:"Zoom out",children:(0,s.jsx)(A.A,{className:"w-5 h-5"})}),(0,s.jsxs)("span",{className:"jsx-dee0d5067efb1ee0 text-sm w-16 text-center",children:[Math.round(100*m),"%"]}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{f(e=>Math.min(e+.1,2))},title:"Zoom in",children:(0,s.jsx)(C.A,{className:"w-5 h-5"})}),(0,s.jsx)(N,{orientation:"vertical",className:"h-6 mx-1"}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>U(!0),title:"Share via email",children:(0,s.jsx)(D.A,{className:"w-5 h-5"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{window.print()},title:"Print",children:(0,s.jsx)(E.A,{className:"w-5 h-5"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:W,title:"Download as PDF",children:(0,s.jsx)(O.A,{className:"w-5 h-5"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:ee,title:"Download as DOCX",children:(0,s.jsx)(_.A,{className:"w-5 h-5"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{let e=window.location.href;navigator.clipboard.writeText(e).then(()=>{Y(!0),setTimeout(()=>Y(!1),2e3),B({title:"Link copied",description:"Document link copied to clipboard",duration:3e3})})},title:X?"Copied!":"Copy link",children:X?(0,s.jsx)(z.A,{className:"w-5 h-5"}):(0,s.jsx)(R.A,{className:"w-5 h-5"})}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>{document.fullscreenElement?document.exitFullscreen():G.current.requestFullscreen().catch(e=>{console.error("Error attempting to enable fullscreen: ".concat(e.message))})},title:F?"Exit fullscreen":"Fullscreen",children:(0,s.jsx)(I.A,{className:"w-5 h-5"})})]})]})}),(0,s.jsx)("div",{ref:G,style:{maxWidth:"100%"},className:"jsx-dee0d5067efb1ee0 flex-1 p-8 mx-auto overflow-auto md:p-12 bg-slate-50 print:p-0 print:bg-white",children:(0,s.jsx)(d,{className:"w-full max-w-[816px] mx-auto shadow-md print:shadow-none",style:{overflow:"hidden"},children:(0,s.jsx)("div",{ref:K,style:{transform:"scale(".concat(m,")"),transformOrigin:"top center",minHeight:"100%"},className:"jsx-dee0d5067efb1ee0 p-8 bg-white transform-gpu",children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:t},className:"jsx-dee0d5067efb1ee0 document-content"})})})}),(0,s.jsx)(u,{open:P,onOpenChange:U,children:(0,s.jsxs)(x,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(h,{children:[(0,s.jsx)(b,{children:"Share Document"}),(0,s.jsx)(v,{children:"Send this document via email to a recipient."})]}),(0,s.jsxs)("form",{onSubmit:Q,className:"jsx-dee0d5067efb1ee0 space-y-4 mt-4",children:[(0,s.jsxs)("div",{className:"jsx-dee0d5067efb1ee0 space-y-2",children:[(0,s.jsx)("label",{htmlFor:"email",className:"jsx-dee0d5067efb1ee0 text-sm font-medium",children:"Recipient Email"}),(0,s.jsx)(w,{id:"email",type:"email",value:L,onChange:e=>V(e.target.value),placeholder:"recipient@example.com",required:!0})]}),(0,s.jsxs)("div",{className:"jsx-dee0d5067efb1ee0 space-y-2",children:[(0,s.jsx)("label",{htmlFor:"message",className:"jsx-dee0d5067efb1ee0 text-sm font-medium",children:"Message (Optional)"}),(0,s.jsx)(j,{id:"message",value:H,onChange:e=>q(e.target.value),placeholder:"Here's the document you requested...",rows:4})]}),(0,s.jsxs)(g,{children:[(0,s.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>U(!1),disabled:J,children:"Cancel"}),(0,s.jsx)(l.$,{type:"submit",disabled:J,children:J?"Sending...":"Send Document"})]})]})]})}),(0,s.jsx)(r(),{id:"dee0d5067efb1ee0",children:"@media print{body{background:white!important}.document-content{-webkit-transform:none!important;-moz-transform:none!important;-ms-transform:none!important;-o-transform:none!important;transform:none!important}.print\\\\:hidden{display:none!important}.print\\\\:p-0{padding:0!important}.print\\\\:shadow-none{-webkit-box-shadow:none!important;-moz-box-shadow:none!important;box-shadow:none!important}.print\\\\:bg-white{background-color:white!important}}"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[455,43,55,441,684,358],()=>t(3774)),_N_E=e.O()}]);