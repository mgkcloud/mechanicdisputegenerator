(()=>{var e={};e.id=325,e.ids=[325],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14279:(e,t,r)=>{"use strict";r.d(t,{FN:()=>i,Pc:()=>c,YE:()=>u});var n=r(91043);let a=void 0!==global.DOCUMENTS_BUCKET,o=a?null:new n.S3Client({region:process.env.S3_REGION||"auto",endpoint:process.env.S3_ENDPOINT,credentials:{accessKeyId:process.env.S3_ACCESS_KEY||"",secretAccessKey:process.env.S3_SECRET_KEY||""}}),s=process.env.S3_BUCKET_NAME||"mechanic-dispute-documents";async function i(e,t,r={}){let{contentType:u="text/html",metadata:c={},format:d="html"}=r,l=`${e}.${d}`;try{return a?await global.DOCUMENTS_BUCKET.put(l,t,{httpMetadata:{contentType:u,cacheControl:"public, max-age=31536000"},customMetadata:{...c,createdAt:new Date().toISOString()}}):await o.send(new n.PutObjectCommand({Bucket:s,Key:l,Body:t,ContentType:u,CacheControl:"public, max-age=31536000",Metadata:{...c,createdAt:new Date().toISOString()}})),`/api/documents/${e}`}catch(e){throw console.error("Error storing document:",e),Error(`Failed to store document: ${e.message}`)}}async function u(e){try{let t=e.endsWith(".html")?e:`${e}.html`;if(a){let e=await global.DOCUMENTS_BUCKET.get(t);if(null===e)return null;return await e.text()}{let e=await o.send(new n.GetObjectCommand({Bucket:s,Key:t}));return await d(e.Body)}}catch(e){if("NoSuchKey"===e.name||"NotFound"===e.name)return null;throw console.error("Error retrieving document:",e),Error(`Failed to retrieve document: ${e.message}`)}}async function c(e){try{if(a){let t=await global.DOCUMENTS_BUCKET.head(e);if(null===t)return null;return{contentType:t.httpMetadata?.contentType,metadata:t.customMetadata,lastModified:t.uploaded,contentLength:t.size}}{let t=await o.send(new n.HeadObjectCommand({Bucket:s,Key:e}));return{contentType:t.ContentType,metadata:t.Metadata,lastModified:t.LastModified,contentLength:t.ContentLength}}}catch(e){if("NotFound"===e.name||"NoSuchKey"===e.name)return null;throw console.error("Error retrieving document metadata:",e),Error(`Failed to retrieve document metadata: ${e.message}`)}}async function d(e){return new Promise((t,r)=>{let n=[];e.on("data",e=>n.push(e)),e.on("error",r),e.on("end",()=>t(Buffer.concat(n).toString("utf-8")))})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},38086:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>w,routeModule:()=>l,serverHooks:()=>h,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>m});var n={};r.r(n),r.d(n,{GET:()=>d});var a=r(96559),o=r(48088),s=r(37719),i=r(32190),u=r(14279),c=r(72698);async function d(e,t){try{let{filename:e}=await t.params;if(!e)throw new c.hD("Filename is required",400);let r=await (0,u.YE)(e);if(!r)throw new c.hD("Document not found",404);return new i.NextResponse(r,{headers:{"Content-Type":"text/html"}})}catch(t){let e=(0,c.hS)(t);return i.NextResponse.json(e,{status:e.statusCode})}}let l=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/document/[filename]/route",pathname:"/api/document/[filename]",filename:"route",bundlePath:"app/api/document/[filename]/route"},resolvedPagePath:"/Users/wlvar/Downloads/mechanicdisputecfworker (2)/app/api/document/[filename]/route.js",nextConfigOutput:"standalone",userland:n}),{workAsyncStorage:p,workUnitAsyncStorage:m,serverHooks:h}=l;function w(){return(0,s.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:m})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},72698:(e,t,r)=>{"use strict";r.d(t,{Rv:()=>o,hD:()=>n,hS:()=>a});class n extends Error{constructor(e,t=500,r=null){super(e),this.name="ApiError",this.statusCode=t,this.details=r}}function a(e){return(console.error("API Error:",e),e instanceof n)?{success:!1,error:e.message,details:e.details,statusCode:e.statusCode}:{success:!1,error:e.message||"An unexpected error occurred",statusCode:500}}function o(e,t){let r=t.filter(t=>!e[t]);if(r.length>0)throw new n(`Missing required fields: ${r.join(", ")}`,400,{missingFields:r})}},78335:()=>{},91043:e=>{"use strict";e.exports=require("@aws-sdk/client-s3")},96487:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[447,580],()=>r(38086));module.exports=n})();